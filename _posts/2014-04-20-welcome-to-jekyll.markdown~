---
layout: post
title:  "Animating SVG path <span>segments</span>"
date:   2014-04-20 09:11:03
categories: tutorial
image: path.jpg
image_thumbnail: path_thumb.jpg
color: "#17A084"
---

Las ultimas semanas he estado trabajando en una herramienta que permita animar los SVG paths strokes de forma configurable.
Esto debido a que la unica herramienta que conozco para realizar este tipo de tareas es DrawSVG Plugin de GSAP, pero
la misma no es gratuita :(

Por esta razon he estado analizando la forma de animar el path stroke con el uso de los atributos stroke-dasharray y
stroke-dashoffset, y el resultado ha sido la herramienta que hoy pongo a su disposicion: Segment, a little JavaScript class
(without dependencies) to draw and animate SVG path strokes.

You can check the Segment demo, or get the source code from GitHub. Ademas, quizas este interesado en entender como
funciona Segment, en ese caso, estare encantado de mostrarle la teoria escondida detras.

## stroke-dasharray y stroke-dashoffset

Lo primero es entender las propiedades [stroke-dasharray](https://developer.mozilla.org/en/docs/Web/SVG/Attribute/stroke-dasharray)
y [stroke-dashoffset](https://developer.mozilla.org/en/docs/Web/SVG/Attribute/stroke-dashoffset). Ademas puede encontrar
una excelente explicacion en [este articulo de Jake Archibald](https://jakearchibald.com/2013/animated-line-drawing-svg/).

Entonces, como dibujar el trazo del camino de una distancia determinada a otra usando estos atributos?

## Drawing between a begin and end

La respuesta es definir los atributos de la siguiente forma:

- stroke-dasharray = "totalLength, begin, end - begin"
- stroke-dashoffset = totalLength

********* GIF *********

Debido a que stroke-dasharray specify the lengths of alternating dashes and gaps, el primer valor (totalLength) indica que la
longitud del primer dash va a ser igual a la longitud total del camino. Pero como hemos definido la misma longitud para
stroke-dashoffset, este dash no sera visible, ya que se "corre" hasta el inicio del camino.
El siguiente valor (begin) es la longitud del gap, que efectivamente es donde queremos empezar a dibujar. Por ultimo
hemos definido un tercer valor (end - begin), que corresponde a la longitud del siguiente dash, quedando de esta forma
dibujada solo la parte entre begin y end.
Haber definido 3 valores (un numero impar) para stroke-dasharray, es equivalente a repetir esos valores to yield an even
number of values, entonces el siguiente gap tendra una longitud igual a la longitud total del camino.

Esta es una formula basica para dibujar el trozo del camino que quieras :)

La ventaja de usar Segment es que puedes animar la transicion de un trozo a otro, definir a begin and end values with
expressions like "50% - 10", configurar delays, easing functions, callbacks, y pesa menos de 2kb!